function createElement(t,e){"use strict";return"<"+t+">"+e+"</"+t+">"}function createBtn(t,e,o,i){"use strict";return'<button class="'+e+'" id="'+t+o+'" value="'+o+'" name="'+t+'">'+i+"</button>"}function load(t,e){"use strict";$("#"+t).text(e)}function loadForm(t,e){"use strict";$("#"+t).val(e)}function ObjectToString(t){"use strict";for(var e=Object.getOwnPropertyNames(t),o="",i=0;i<e.length;i++)"object"!=typeof t[e[i]]?o+=" "+t[e[i]]:o+=" "+ObjectToString(t[e[i]]);return o}function destructuringObject(t,e){"use strict";for(var o=Object.getOwnPropertyNames(t),i=0;i<o.length;i++)loadForm(e[i],t[o[i]])}$(document).ready(function(){"use strict";service().getUserId(localStorage.getItem("id"),function(t){loadDetails(t),backButton(),$(".loader").fadeOut()})}),$(document).ready(function(){"use strict";"create"===localStorage.getItem("selector")?loadCreate():loadModifyRemove(),backButton()}),$(document).ready(function(){"use strict";service().getUser(function(t){loadTable("userTable",t),clickBtnTable("form.html","create",""),submitModal(),$(".loader").fadeOut()})});var url="https://jsonplaceholder.typicode.com/users/";function service(){"use strict";return{getUser:function(t){$.getJSON(url,t)},getUserId:function(t,e){$.getJSON(url+t,e)}}}function clickBtnTable(t,e,o){"use strict";$("#"+e+o).click(function(){localStorage.setItem("id",o),localStorage.setItem("selector",e),window.open(t,"_self")})}function submit(t,e,o,i,n){"use strict";function r(){$.ajax({url:url+t,type:e,data:o,success:function(t,e){$("#"+i).text(n+" "+e),setTimeout(function(){window.open("index.html","_self")},2e3)},error:function(t,e,o){console.log(o)}})}$("#submit").click(function(){"delete"===e?window.confirm("Vuoi veramente cancellare l'utente?")&&r():r()})}function backButton(){"use strict";$("#back").click(function(){window.open("index.html","_self")})}function submitModal(){"use strict";$("#submit").click(function(){$("#modalContact").modal("toggle")})}function createTDS(t){"use strict";for(var e=Object.getOwnPropertyNames(t),o="",i=1;i<4;i++)o+=createElement("td",t[e[i]]);return o}function createTr(t){"use strict";var e=createTDS(t);return createElement("tr",e+=createElement("td",createBtn("details","btn btn-primary",t.id,"Dettagli")+createBtn("modify","btn btn-primary",t.id,"Modifica")+createBtn("remove","btn btn-primary",t.id,"Rimuovi")))}function loadRowTable(t,e){"use strict";var o=createTr(e);$("#"+t).append(o),clickBtnTable("details.html","details",e.id),clickBtnTable("form.html","modify",e.id),clickBtnTable("form.html","remove",e.id)}function loadTable(t,e){"use strict";for(var o=0;o<e.length;o++)loadRowTable(t,e[o])}function bindingDetails(t,e){"use strict";load(e,"object"!=typeof t?t:ObjectToString(t))}function loadDetails(t){"use strict";for(var e=Object.getOwnPropertyNames(t),o=["id","name","username","email","address","phone","website"],i=0;i<o.length;i++)bindingDetails(t[e[i]],o[i])}function loadCreate(){"use strict";$("#title").text("Crea"),$(".loader").fadeOut(),submit("","post",$("#contact").serialize,"result","Create")}function bindingForm(t,e){"use strict";"object"!=typeof t?loadForm(e,t):destructuringObject(t,["street","suite","city","zipcode"])}function bindForm(t){"use strict";for(var e=Object.getOwnPropertyNames(t),o=["id","name","username","email","","phone","website"],i=1;i<o.length;i++)bindingForm(t[e[i]],o[i])}function loadModify(){"use strict";$("#title").text("Modifica"),submit(localStorage.getItem("id"),"put",$("#contact").serialize,"result","modify")}function loadRemove(){"use strict";$("#title").text("Rimuovi"),$("#submit").val("Cancella"),submit(localStorage.getItem("id"),"delete",$("#contact").serialize,"result","delete")}function loadModifyRemove(){"use strict";service().getUserId(localStorage.getItem("id"),function(t){bindForm(t),"modify"===localStorage.getItem("selector")?loadModify():loadRemove(),$(".loader").fadeOut()})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbHBlci5qcyIsImRldGFpbHMuanMiLCJmb3JtLmpzIiwiaW5kZXguanMiLCJzZXJ2aWNlLmpzIiwidmlldy5qcyJdLCJuYW1lcyI6WyJjcmVhdGVFbGVtZW50IiwidHlwZSIsImRhdGEiLCJjcmVhdGVCdG4iLCJuYW1lIiwiY2xhc3NCdG4iLCJpZCIsInZhbHVlIiwibG9hZCIsIiQiLCJ0ZXh0IiwibG9hZEZvcm0iLCJ2YWwiLCJPYmplY3RUb1N0cmluZyIsInByb3BlcnR5IiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInN0cmluZyIsImkiLCJsZW5ndGgiLCJkZXN0cnVjdHVyaW5nT2JqZWN0IiwiYXJyYXkiLCJkb2N1bWVudCIsInJlYWR5Iiwic2VydmljZSIsImdldFVzZXJJZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJsb2FkRGV0YWlscyIsImJhY2tCdXR0b24iLCJmYWRlT3V0IiwibG9hZENyZWF0ZSIsImxvYWRNb2RpZnlSZW1vdmUiLCJnZXRVc2VyIiwibG9hZFRhYmxlIiwiY2xpY2tCdG5UYWJsZSIsInN1Ym1pdE1vZGFsIiwidXJsIiwiY2FsbGJhY2siLCJnZXRKU09OIiwiaHRtbCIsImNsaWNrIiwic2V0SXRlbSIsIndpbmRvdyIsIm9wZW4iLCJzdWJtaXQiLCJyZXN1bHQiLCJ0eXBlQ2FsbCIsImNhbGxSZXN0IiwiYWpheCIsInN1Y2Nlc3MiLCJ0ZXh0U3RhdHVzIiwic2V0VGltZW91dCIsImVycm9yIiwiZXJyb3JUaHJvd24iLCJjb25zb2xlIiwibG9nIiwiY29uZmlybSIsIm1vZGFsIiwiY3JlYXRlVERTIiwidGRzIiwiY3JlYXRlVHIiLCJ0ciIsImxvYWRSb3dUYWJsZSIsInRhYmxlIiwiYXBwZW5kIiwiYmluZGluZ0RldGFpbHMiLCJhcnJheUlkIiwic2VyaWFsaXplIiwiYmluZGluZ0Zvcm0iLCJiaW5kRm9ybSIsImxvYWRNb2RpZnkiLCJsb2FkUmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFRQSxTQUFBQSxjQUFB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LEVBQUFuQixHQUFBa0Isb0JBQUFsQixHQUFBLFNBQUEsUUFBQSxPQUFBLFlBRUEsU0FBQW9FLFNBQUFwRSxHQUNBLGFBR0EsSUFGQSxJQUFBWSxFQUFBQyxPQUFBQyxvQkFBQWQsR0FDQWlFLEdBQUEsS0FBQSxPQUFBLFdBQUEsUUFBQSxHQUFBLFFBQUEsV0FDQWpELEVBQUEsRUFBQUEsRUFBQWlELEVBQUFoRCxPQUFBRCxJQUNBbUQsWUFBQW5FLEVBQUFZLEVBQUFJLElBQUFpRCxFQUFBakQsSUFHQSxTQUFBcUQsYUFDQSxhQUNBOUQsRUFBQSxVQUFBQyxLQUFBLFlBRUFtQyxPQUFBbkIsYUFBQUMsUUFBQSxNQUFBLE1BQUFsQixFQUFBLFlBQUEyRCxVQUFBLFNBQUEsVUFFQSxTQUFBSSxhQUNBLGFBQ0EvRCxFQUFBLFVBQUFDLEtBQUEsV0FDQUQsRUFBQSxXQUFBRyxJQUFBLFlBRUFpQyxPQUFBbkIsYUFBQUMsUUFBQSxNQUFBLFNBQUFsQixFQUFBLFlBQUEyRCxVQUFBLFNBQUEsVUFFQSxTQUFBcEMsbUJBQ0EsYUFFQVIsVUFBQUMsVUFBQUMsYUFBQUMsUUFBQSxNQUFBLFNBQUF6QixHQUNBb0UsU0FBQXBFLEdBQ0EsV0FBQXdCLGFBQUFDLFFBQUEsWUFBQTRDLGFBQUFDLGFBQ0EvRCxFQUFBLFdBQUFxQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmV4cG9ydGVkIGNyZWF0ZUVsZW1lbnQqL1xuLypleHBvcnRlZCBjcmVhdGVCdG4qL1xuLypleHBvcnRlZCBsb2FkKi9cbi8qZXhwb3J0ZWQgbG9hZEZvcm0qL1xuLypleHBvcnRlZCBPYmplY3RUb1N0cmluZyovXG4vKmV4cG9ydGVkIGRlc3RydWN0dXJpbmdPYmplY3QqL1xuLypnbG9iYWwgJCovXG4vKmpzaGludCBleHByOiB0cnVlKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodHlwZSwgZGF0YSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4gJzwnICsgdHlwZSArICc+JyArIGRhdGEgKyAnPC8nICsgdHlwZSArICc+Jztcbn1cbmZ1bmN0aW9uIGNyZWF0ZUJ0bihuYW1lLCBjbGFzc0J0biwgaWQsIHZhbHVlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiAnPGJ1dHRvbiBjbGFzcz1cIicgKyBjbGFzc0J0biArICdcIiBpZD1cIicgKyBuYW1lICsgaWQgKyAnXCIgdmFsdWU9XCInICsgaWQgKyAnXCIgbmFtZT1cIicgKyBuYW1lICsgJ1wiPicgKyB2YWx1ZSArICc8L2J1dHRvbj4nO1xufVxuZnVuY3Rpb24gbG9hZChpZCwgdmFsdWUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgJCgnIycgKyBpZCkudGV4dCh2YWx1ZSk7XG59XG5mdW5jdGlvbiBsb2FkRm9ybShpZCwgdmFsdWUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgJCgnIycgKyBpZCkudmFsKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIE9iamVjdFRvU3RyaW5nKGRhdGEpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZGF0YSk7XG4gICAgdmFyIHN0cmluZyA9ICcnO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydHkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHlwZW9mIGRhdGFbcHJvcGVydHlbaV1dICE9PSAnb2JqZWN0JyA/IHN0cmluZyArPSBcIiBcIiArIGRhdGFbcHJvcGVydHlbaV1dIDogc3RyaW5nICs9IFwiIFwiICsgT2JqZWN0VG9TdHJpbmcoZGF0YVtwcm9wZXJ0eVtpXV0pO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nO1xufVxuZnVuY3Rpb24gZGVzdHJ1Y3R1cmluZ09iamVjdChkYXRhLCBhcnJheSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkYXRhKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnR5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8qanNoaW50IC1XMTE3ICovXG4gICAgICAgIGxvYWRGb3JtKGFycmF5W2ldLCBkYXRhW3Byb3BlcnR5W2ldXSk7XG4gICAgfVxufSIsIi8qZ2xvYmFsICQqL1xuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAvKmpzaGludCAtVzExNyAqL1xuICAgIHNlcnZpY2UoKS5nZXRVc2VySWQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGxvYWREZXRhaWxzKGRhdGEpO1xuICAgICAgICBiYWNrQnV0dG9uKCk7XG4gICAgICAgICQoJy5sb2FkZXInKS5mYWRlT3V0KCk7XG4gICAgfSk7XG59KTsiLCIvKmdsb2JhbCAkKi9cbi8qanNoaW50IGV4cHI6IHRydWUqL1xuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAvKmpzaGludCAtVzExNyAqL1xuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxlY3RvcicpPT09J2NyZWF0ZSc/bG9hZENyZWF0ZSgpOmxvYWRNb2RpZnlSZW1vdmUoKTsgICAgICAgXG4gICAgYmFja0J1dHRvbigpO1xufSk7IiwiLypnbG9iYWwgJCovXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpe1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAvKmpzaGludCAtVzExNyAqL1xuICAgIHNlcnZpY2UoKS5nZXRVc2VyKGZ1bmN0aW9uIChkYXRhKXtcbiAgICAgICAgbG9hZFRhYmxlKFwidXNlclRhYmxlXCIsZGF0YSk7XG4gICAgICAgIGNsaWNrQnRuVGFibGUoJ2Zvcm0uaHRtbCcsJ2NyZWF0ZScsJycpO1xuICAgICAgICBzdWJtaXRNb2RhbCgpO1xuICAgICAgICAkKCcubG9hZGVyJykuZmFkZU91dCgpO1xuICAgIH0pO1xufSk7IiwiLypnbG9iYWwgJCovXG4vKmV4cG9ydGVkIHNlcnZpY2UqL1xuLypleHBvcnRlZCBjbGlja0J0blRhYmxlKi9cbi8qZXhwb3J0ZWQgYmFja0J1dHRvbiovXG4vKmV4cG9ydGVkIGNhbGxSZXN0Ki9cbi8qZXhwb3J0ZWQgc3VibWl0Ki9cbi8qZXhwb3J0ZWQgc3VibWl0TW9kYWwqL1xuLypqc2hpbnQgZXhwcjogdHJ1ZSovXG52YXIgdXJsID0gXCJodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdXNlcnMvXCI7XG5mdW5jdGlvbiBzZXJ2aWNlKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRVc2VyOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICQuZ2V0SlNPTih1cmwsIGNhbGxiYWNrKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VXNlcklkOiBmdW5jdGlvbiAoaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAkLmdldEpTT04odXJsICsgaWQsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjbGlja0J0blRhYmxlKGh0bWwsIHR5cGUsIGlkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgICQoJyMnICsgdHlwZSArIGlkKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZCcsIGlkKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdG9yJywgdHlwZSk7XG4gICAgICAgIHdpbmRvdy5vcGVuKGh0bWwsIFwiX3NlbGZcIik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBzdWJtaXQoaWQsIHR5cGUsIGRhdGEsIHJlc3VsdCwgdHlwZUNhbGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgJCgnI3N1Ym1pdCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLypqc2hpbnQgLVcxMTcgKi9cbiAgICAgICAgdHlwZSA9PT0gJ2RlbGV0ZScgPyBkZWwoKSA6IGNhbGxSZXN0KCk7XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gZGVsKCkge1xuICAgICAgICBpZiAod2luZG93LmNvbmZpcm0oXCJWdW9pIHZlcmFtZW50ZSBjYW5jZWxsYXJlIGwndXRlbnRlP1wiKSkge1xuICAgICAgICAgICAgY2FsbFJlc3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjYWxsUmVzdCgpIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogdXJsICsgaWQsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhLCB0ZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgJCgnIycgKyByZXN1bHQpLnRleHQodHlwZUNhbGwgKyBcIiBcIiArIHRleHRTdGF0dXMpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihcImluZGV4Lmh0bWxcIiwgXCJfc2VsZlwiKTtcbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBiYWNrQnV0dG9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAkKCcjYmFjaycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Lm9wZW4oJ2luZGV4Lmh0bWwnLCBcIl9zZWxmXCIpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzdWJtaXRNb2RhbCgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgJCgnI3N1Ym1pdCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICQoJyNtb2RhbENvbnRhY3QnKS5tb2RhbCgndG9nZ2xlJyk7XG4gICAgfSk7XG59XG4iLCIvKmdsb2JhbCAkKi9cbi8qZXhwb3J0ZWQgbG9hZFRhYmxlKi9cbi8qZXhwb3J0ZWQgbG9hZERldGFpbHMqL1xuLypleHBvcnRlZCBsb2FkQ3JlYXRlKi9cbi8qZXhwb3J0ZWQgbG9hZE1vZGlmeVJlbW92ZSovXG4vKmpzaGludCBleHByOiB0cnVlKi9cbmZ1bmN0aW9uIGNyZWF0ZVREUyhkYXRhKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGRhdGEpO1xuICAgIHZhciB0ZHMgPSAnJztcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IDQ7IGkrKykge1xuICAgICAgICAvKmpzaGludCAtVzExNyAqL1xuICAgICAgICB0ZHMgKz0gY3JlYXRlRWxlbWVudCgndGQnLCBkYXRhW3Byb3BlcnR5W2ldXSk7XG4gICAgfVxuICAgIHJldHVybiB0ZHM7XG59XG5mdW5jdGlvbiBjcmVhdGVUcihkYXRhKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciB0ciA9IGNyZWF0ZVREUyhkYXRhKTtcbiAgICAvKmpzaGludCAtVzExNyAqL1xuICAgIHRyICs9IGNyZWF0ZUVsZW1lbnQoJ3RkJywgY3JlYXRlQnRuKCdkZXRhaWxzJywgJ2J0biBidG4tcHJpbWFyeScsIGRhdGEuaWQsICdEZXR0YWdsaScpICtcbiAgICAgICAgY3JlYXRlQnRuKCdtb2RpZnknLCAnYnRuIGJ0bi1wcmltYXJ5JywgZGF0YS5pZCwgJ01vZGlmaWNhJykgK1xuICAgICAgICBjcmVhdGVCdG4oJ3JlbW92ZScsICdidG4gYnRuLXByaW1hcnknLCBkYXRhLmlkLCAnUmltdW92aScpKTtcbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudCgndHInLCB0cik7XG59XG5mdW5jdGlvbiBsb2FkUm93VGFibGUodGFibGUsIGRhdGEpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHRyID0gY3JlYXRlVHIoZGF0YSk7XG4gICAgJCgnIycgKyB0YWJsZSkuYXBwZW5kKHRyKTtcbiAgICAvKmpzaGludCAtVzExNyAqL1xuICAgIGNsaWNrQnRuVGFibGUoJ2RldGFpbHMuaHRtbCcsICdkZXRhaWxzJywgZGF0YS5pZCk7XG4gICAgLypqc2hpbnQgLVcxMTcgKi9cbiAgICBjbGlja0J0blRhYmxlKCdmb3JtLmh0bWwnLCAnbW9kaWZ5JywgZGF0YS5pZCk7XG4gICAgLypqc2hpbnQgLVcxMTcgKi9cbiAgICBjbGlja0J0blRhYmxlKCdmb3JtLmh0bWwnLCAncmVtb3ZlJywgZGF0YS5pZCk7XG59XG5mdW5jdGlvbiBsb2FkVGFibGUodGFibGUsIGRhdGEpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxvYWRSb3dUYWJsZSh0YWJsZSwgZGF0YVtpXSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYmluZGluZ0RldGFpbHMoZGF0YSwgaWQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgLypqc2hpbnQgLVcxMTcgKi9cbiAgICB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgPyBsb2FkKGlkLCBkYXRhKSA6IGxvYWQoaWQsIE9iamVjdFRvU3RyaW5nKGRhdGEpKTtcbn1cbmZ1bmN0aW9uIGxvYWREZXRhaWxzKGRhdGEpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZGF0YSk7XG4gICAgdmFyIGFycmF5SWQgPSBbJ2lkJywgJ25hbWUnLCAndXNlcm5hbWUnLCAnZW1haWwnLCAnYWRkcmVzcycsICdwaG9uZScsICd3ZWJzaXRlJ107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJpbmRpbmdEZXRhaWxzKGRhdGFbcHJvcGVydHlbaV1dLCBhcnJheUlkW2ldKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb2FkQ3JlYXRlKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAkKCcjdGl0bGUnKS50ZXh0KCdDcmVhJyk7XG4gICAgJCgnLmxvYWRlcicpLmZhZGVPdXQoKTtcbiAgICAvKmpzaGludCAtVzExNyAqL1xuICAgIHN1Ym1pdCgnJywgJ3Bvc3QnLCAkKCcjY29udGFjdCcpLnNlcmlhbGl6ZSwgJ3Jlc3VsdCcsICdDcmVhdGUnKTtcbn1cbmZ1bmN0aW9uIGJpbmRpbmdGb3JtKGRhdGEsIGFycmF5KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIC8qanNoaW50IC1XMTE3ICovXG4gICAgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnID8gbG9hZEZvcm0oYXJyYXksIGRhdGEpIDogZGVzdHJ1Y3R1cmluZ09iamVjdChkYXRhLCBbJ3N0cmVldCcsICdzdWl0ZScsICdjaXR5JywgJ3ppcGNvZGUnXSk7XG59XG5mdW5jdGlvbiBiaW5kRm9ybShkYXRhKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGRhdGEpO1xuICAgIHZhciBhcnJheUlkID0gWydpZCcsICduYW1lJywgJ3VzZXJuYW1lJywgJ2VtYWlsJywgJycsICdwaG9uZScsICd3ZWJzaXRlJ107XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnJheUlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJpbmRpbmdGb3JtKGRhdGFbcHJvcGVydHlbaV1dLCBhcnJheUlkW2ldKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb2FkTW9kaWZ5KCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAkKCcjdGl0bGUnKS50ZXh0KCdNb2RpZmljYScpO1xuICAgIC8qanNoaW50IC1XMTE3ICovXG4gICAgc3VibWl0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLCAncHV0JywgJCgnI2NvbnRhY3QnKS5zZXJpYWxpemUsICdyZXN1bHQnLCAnbW9kaWZ5Jyk7XG59XG5mdW5jdGlvbiBsb2FkUmVtb3ZlKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAkKCcjdGl0bGUnKS50ZXh0KCdSaW11b3ZpJyk7XG4gICAgJCgnI3N1Ym1pdCcpLnZhbCgnQ2FuY2VsbGEnKTtcbiAgICAgICAgLypqc2hpbnQgLVcxMTcgKi9cbiAgICAgICAgc3VibWl0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLCAnZGVsZXRlJywgJCgnI2NvbnRhY3QnKS5zZXJpYWxpemUsICdyZXN1bHQnLCAnZGVsZXRlJyk7IFxufVxuZnVuY3Rpb24gbG9hZE1vZGlmeVJlbW92ZSgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgLypqc2hpbnQgLVcxMTcgKi9cbiAgICBzZXJ2aWNlKCkuZ2V0VXNlcklkKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBiaW5kRm9ybShkYXRhKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlbGVjdG9yJykgPT09ICdtb2RpZnknID8gbG9hZE1vZGlmeSgpIDogbG9hZFJlbW92ZSgpO1xuICAgICAgICAkKCcubG9hZGVyJykuZmFkZU91dCgpO1xuICAgIH0pO1xufSJdfQ==
